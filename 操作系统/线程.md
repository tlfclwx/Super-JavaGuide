# 线程

## 线程带来的变化

**资源分配、调度方面：**

在传统的进程机制中，进程是资源分配、调度的基本单位。引入线程以后，==**进程是资源分配的基本单位，线程是调度的基本单位**==。

**并发性方面：**

在传统的进程机制中，只能进程间并发。引入线程之后，各线程间也能并发，也就意味着一个应用程序通过分时复用可以同时的做多件事，比如qq同时视频和发送消息。

**系统开销方面：**

传统的进程间并发，需要切换进程的运行环境，系统开销很大。==**线程间并发，是同一进程内的线程切换，不需要直接切换进程，开销比较小**==。（进程切换需要存储PCB状态等）



## 用户级线程和内核级线程

用户级线程： 所有的线程管理工作由应用程序负责

内核级线程：内核级线程的管理工作是由操作系统内核负责的

## 线程同步是干嘛用的，实现方式有哪些

线程同步用于并发访问关键资源时避免冲突。

互斥量（Synchronized/Lock），只有拥有互斥对象的线程才有访问公共资源的权限。实现资源互斥
信号量：PV操作，P是-，V是+。对于P，m>0时就-1，否则挂起进程的执行。对于V，如果有其他进程因等待m而被挂起，就让他恢复，否则m+1。实现多个线程访问同一个共享资源
事件信号：wait/notify。控制优先级和执行顺序