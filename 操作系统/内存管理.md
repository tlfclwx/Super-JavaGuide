# 内存管理
> 内存管理主要做什么

主要负责内存的分配与回收（melloc和free）。将逻辑地址转换为物理地址。

> 内存管理有几种方式 说一下

连续分配管理和非连续分配管理。

连续分配管理比如块式管理，非连续分配管理比如页式管理和段式管理还有段页式管理

1. 块式管理：
   - 把内存分为几个固定大小的块，每个块只包含一个进程。
2. 页式管理：
   - 将内存分为大小相等的页，且固定页的形式（4kb）。提高了内存利用率，减少了碎片，页式管理可以通过页表对应逻辑地址和物理地址。
3. 段式管理：
   - 页式管理无实际意义。而段式管理有实际意义，每个段定义了一组逻辑信息。比如代码段，数据段等。
4. 段页式管理：
   - 结合分段和分贝思想，先将用户程序分成若干段并分别赋予段名，再将这些段分为若干页
   - 地址结构:由段号、段内页号和页内地址三项共同构成地址

> 讲一下快表和多级页表吧

快表和多级页表都是页表管理中的。
快表是为了加速虚拟地址到物理地址的映射。快表放在缓存中，因此不需要对内存进行IO，速度更快。其流程如下：
- 先访问缓存中的快表，如果不存在
- 再去访问页表，如果有就把该想保存到快表中
- 当快表填满之后，需要进行淘汰。

多级页表是为了避免把全部页表一直放在内存中而占用空间。因此只存一部分在内存中。

> 什么是局部性原理说一下

- 时间局部性：如果一条指令被执行了，或者一个数据被访问了，那么最近很可能再次执行和访问。这是因为程序中大量的循环。
- 空间局部性：如果访问了某个存储单元，那么这个地址附近的也很可能会被访问。因为数据大多是顺序分布的，比如数组等。

> 虚拟内存的实现要依赖什么

页面置换算法，当发生缺页中断的时候，就需要页面置换。


